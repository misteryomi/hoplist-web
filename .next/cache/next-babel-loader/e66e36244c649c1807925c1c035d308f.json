{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useState } from 'react';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { Alert, Form, Row, Col, FormGroup, Label, Input } from 'reactstrap';\nimport { useToasts } from 'react-toast-notifications';\nimport { CopyToClipboard } from 'react-copy-to-clipboard';\nimport Icon from './Icon';\nimport { faTwitter, faFacebook, faWhatsapp, faInstagram, faLinkedin } from '@fortawesome/free-brands-svg-icons';\nimport Router from 'next/router';\nimport axios from '../utils/axios';\nconst shareOptions = [{\n  name: 'Facebook',\n  icon: faFacebook,\n  link: 'http://facebook.com/#'\n}, {\n  name: 'Twitter',\n  icon: faTwitter,\n  link: '#'\n}, {\n  name: 'WhatsApp',\n  icon: faWhatsapp,\n  link: '#'\n}, {\n  name: 'Instagram',\n  icon: faInstagram,\n  link: '#'\n}, {\n  name: 'LinkedIn',\n  icon: faLinkedin,\n  link: '#'\n}];\n\nconst JoinForm = props => {\n  const {\n    buttonLabel,\n    className\n  } = props;\n  const {\n    0: modal,\n    1: setModal\n  } = useState(false);\n  const {\n    0: firstName,\n    1: setFirstName\n  } = useState('');\n  const {\n    0: lastName,\n    1: setLastName\n  } = useState('');\n  const {\n    0: email,\n    1: setEmail\n  } = useState('');\n  const {\n    0: phone,\n    1: setPhone\n  } = useState('');\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(false);\n  const {\n    0: error,\n    1: setError\n  } = useState(null);\n\n  const toggle = () => setModal(!modal);\n\n  const {\n    addToast\n  } = useToasts();\n\n  const handleCopy = () => {\n    setModal(false);\n    addToast('Link copied successfully!', {\n      appearance: 'success',\n      autoDismiss: true\n    });\n  };\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setError(null);\n    setLoading(true);\n    const data = {\n      firstName,\n      lastName,\n      email,\n      phone,\n      activityId: props.activity_id\n    };\n\n    try {\n      const response = await axios.post('/tickets', data);\n      setLoading(false);\n      console.log({\n        response\n      });\n      setModal(false);\n      addToast('Hooray! Successful!!', {\n        appearance: 'success',\n        autoDismiss: true\n      });\n      setTimeout(() => {\n        Router.push(`/success?ticket=${response.data.data.ticket_id}`);\n      });\n    } catch (e) {\n      setLoading(false);\n      setError(e.response ? e.response.data.message : 'An error occured. Please try again');\n      console.log({\n        e\n      });\n    }\n  };\n\n  return __jsx(\"div\", {\n    class: \"form-bg\"\n  }, __jsx(\"h3\", null, \"Join this Activity\"), __jsx(\"div\", null, __jsx(\"small\", {\n    style: {\n      fontSize: 10\n    }\n  }, \"Your name will be used by your host to identify you and We'll use your email address to send you details of the activity\"), __jsx(\"br\", null), __jsx(\"br\", null), error && __jsx(React.Fragment, null, __jsx(Alert, {\n    color: \"warning\"\n  }, error), __jsx(\"br\", null)), __jsx(Form, {\n    action: \"#\",\n    method: \"post\",\n    onSubmit: handleSubmit\n  }, __jsx(FormGroup, null, __jsx(Label, {\n    for: \"email\"\n  }, \"First name *\"), __jsx(Input, {\n    type: \"text\",\n    required: true,\n    name: \"first_name\",\n    id: \"email\",\n    onChange: e => setFirstName(e.target.value)\n  })), __jsx(FormGroup, null, __jsx(Label, {\n    for: \"lastName\"\n  }, \"Last name *\"), __jsx(Input, {\n    type: \"text\",\n    required: true,\n    name: \"last_name\",\n    id: \"lastName\",\n    onChange: e => setLastName(e.target.value)\n  })), __jsx(FormGroup, null, __jsx(Label, {\n    for: \"email\"\n  }, \"Email *\"), __jsx(Input, {\n    type: \"email\",\n    required: true,\n    name: \"email\",\n    id: \"email\",\n    onChange: e => setEmail(e.target.value)\n  })), __jsx(FormGroup, null, __jsx(Label, {\n    for: \"phone\"\n  }, \"Mobile Number (optional)\"), __jsx(Input, {\n    type: \"text\",\n    name: \"phone\",\n    id: \"phone\",\n    onChange: e => setPhone(e.target.value)\n  })), __jsx(Button, {\n    disabled: loading,\n    block: true,\n    type: \"submit\",\n    color: \"danger\"\n  }, loading ? __jsx(\"i\", {\n    className: \"fa fa-spin fa-spinner\"\n  }) : 'Join Activity'))), __jsx(\"div\", {\n    style: {\n      marginTop: 20\n    }\n  }, __jsx(Alert, {\n    color: \"danger\"\n  }, __jsx(\"h4\", {\n    style: {\n      fontWeight: 'normal'\n    }\n  }, \"Note\"), __jsx(\"p\", null, \"By clicking \\\"Join Activity\\\", I accept the \", __jsx(\"a\", {\n    href: \"#\"\n  }, \"Terms of Service\"), \" and have read the \", __jsx(\"a\", {\n    href: \"#\"\n  }, \"Privacy Policy\"), \". I agree that Hoplist may \", __jsx(\"a\", {\n    href: \"#\"\n  }, \"share my information\"), \" with the Host.\"))));\n};\n\nexport default JoinForm;","map":null,"metadata":{},"sourceType":"module"}